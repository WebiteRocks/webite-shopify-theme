{% stylesheet %}
  .main-collection__item {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .main-collection__item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }

  .main-collection__image {
    height: 200px;
    object-fit: cover;
  }

  @media (min-width: 768px) {
    .main-collection__image {
      height: 220px;
    }
  }

  @media (min-width: 1024px) {
    .main-collection__image {
      height: 250px;
    }
  }

  .main-collection__no-image {
    background-color: #f5f5f5;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #999;
    font-size: 0.875rem;
    height: 200px;
  }

  @media (min-width: 768px) {
    .main-collection__no-image {
      height: 220px;
    }
  }

  @media (min-width: 1024px) {
    .main-collection__no-image {
      height: 250px;
    }
  }
{% endstylesheet %}

<section class="uk-section uk-section-default">
  <div class="uk-container">
    <div class="uk-text-center uk-margin-large-bottom">
      <h1 class="uk-heading-medium uk-margin-remove-bottom">{{ collection.title | default: 'All Products' }}</h1>
      {%- if collection.description != blank -%}
        <div class="uk-text-lead uk-text-muted uk-margin-small-top">
          {{ collection.description }}
        </div>
      {%- endif -%}
    </div>

    <div class="uk-grid uk-grid-medium uk-child-width-1-1 uk-child-width-1-2@s uk-child-width-1-3@m uk-child-width-1-4@l" uk-grid>
      {%- for product in collection.products -%}
        <div>
          <div class="uk-card uk-card-default uk-card-hover main-collection__item">
            <div class="uk-card-media-top">
              <a href="{{ product.url }}">
                {%- if product.featured_media -%}
                  {% render 'image', 
                      image: product.featured_media.preview_image,
                      image_class: "main-collection__image uk-width-1-1",
                      max_width: 600,
                      max_height: 600,
                      sizes: "(min-width: 600px) 300px, 100vw",
                      widths: "300, 450, 600",
                      loading: forloop.first ? 'eager' : 'lazy',
                      attributes: 'alt="{{ product.featured_media.alt | default: product.title }}"'
                  %}
                {%- else -%}
                  <div class="main-collection__image main-collection__no-image uk-width-1-1">
                    No Image
                  </div>
                {%- endif -%}
              </a>
            </div>
            <div class="uk-card-body uk-padding-small">
              <a href="{{ product.url }}" class="uk-link-reset">
                <h3 class="uk-card-title uk-text-small uk-margin-small-bottom">{{ product.title }}</h3>
                
                <div class="uk-text-bold uk-text-primary">
                  {%- if product.compare_at_price > product.price -%}
                    <span class="uk-text-muted uk-text-decoration-line-through uk-margin-small-right">{{ product.compare_at_price | money }}</span>
                  {%- endif -%}
                  {{ product.price | money }}
                </div>
              </a>
            </div>
          </div>
        </div>
      {%- else -%}
        <div class="uk-width-1-1">
          <div class="uk-text-center uk-padding-large">
            <p class="uk-text-large uk-text-muted">No products found in this collection.</p>
          </div>
        </div>
      {%- endfor -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Collection Page",
  "settings": [],
    "presets": [
        {
        "name": "Main Collection",
        "category": "Collections"
        }
    ]
}
{% endschema %}
